<?xml version = '1.0' encoding = 'UTF-8'?>
<PackageOracle class="oracle.dbtools.crest.model.design.storage.oracle.PackageOracle" name="PKG_UTILITY" directorySegmentName="seg_6" id="0882086E-ADEB-F1F6-2E58-C7E955B4E8C6">
<sourceConnName>SOLO_Prod</sourceConnName>
<sourceObjSchema>CHTR</sourceObjSchema>
<sourceObjName>PKG_UTILITY</sourceObjName>
<createdBy>jandrews1</createdBy>
<createdTime>2015-08-11 13:17:27 UTC</createdTime>
<ownerDesignName>SOLO_RE</ownerDesignName>
<owner>5AF9E3FC-7A76-C437-3E83-BF29D7EA2FC7</owner>
<source>CREATE OR REPLACE PACKAGE      CHTR.PKG_UTILITY&lt;br/&gt;IS&lt;br/&gt;   /****************************************************************************************************************&lt;br/&gt;   ||  Program Name    : pkg_utility&lt;br/&gt;   ||  Created By      : Cognizant&lt;br/&gt;   ||  Created Date    : 23-AUG-2014&lt;br/&gt;   ||  Subject Area    : General&lt;br/&gt;   ||  Description     : The package pkg_utility is for SOLO utility procedures and functions&lt;br/&gt;   ||                    that will be used by other packages.&lt;br/&gt;   ||  Change log:&lt;br/&gt;   ||&lt;br/&gt;   ||    Changed By      Changed On      Change Description&lt;br/&gt;   ||  -------------------------------------------------------------------------------------------------------------&lt;br/&gt;   ||     Knoll          23-AUG-2014     Initial development&lt;br/&gt;   ||     Cognizant      10-Nov-2014     Standardization Changes&lt;br/&gt;   ||     knoll          02-Feb-2015     Add mac address conversion function, cnvrt_eqmt_addr&lt;br/&gt;   ||     Binoy(SOLODB)  02-Feb-2015     Add new constant varriable c_party_account_role_cd_resp&lt;br/&gt;   ******************************************************************************************************************/&lt;br/&gt;   c_logging_off                    CONSTANT NUMBER (1)    := 0;&lt;br/&gt;   c_logging_on                     CONSTANT NUMBER (1)    := 1;&lt;br/&gt;   c_logging_debug                  CONSTANT NUMBER (1)    := 2;&lt;br/&gt;   c_information                    CONSTANT CHAR (1)      := &apos;I&apos;;&lt;br/&gt;   c_exception                      CONSTANT CHAR (1)      := &apos;E&apos;;&lt;br/&gt;   c_debug                          CONSTANT CHAR (1)      := &apos;D&apos;;&lt;br/&gt;   c_process_success                CONSTANT VARCHAR2 (23) := &apos;SUCCESS&apos;;&lt;br/&gt;   c_process_error                  CONSTANT VARCHAR2 (23)&lt;br/&gt;                                                  := &apos;ERROR WHILE PROCESSING&apos;;&lt;br/&gt;   c_process_cancel                 CONSTANT VARCHAR2 (30)&lt;br/&gt;                                              := &apos;PROCESS HAS BEEN CANCELLED&apos;;&lt;br/&gt;   c_record_active                  CONSTANT VARCHAR2 (1)  := &apos;A&apos;;&lt;br/&gt;   c_record_delete                  CONSTANT VARCHAR2 (1)  := &apos;D&apos;;&lt;br/&gt;   c_stg_processed                  CONSTANT VARCHAR2 (1)  := &apos;P&apos;;&lt;br/&gt;   c_stg_status_h                   CONSTANT VARCHAR2 (1)  := &apos;H&apos;;&lt;br/&gt;   c_stg_status_w                   CONSTANT VARCHAR2 (1)  := &apos;W&apos;;&lt;br/&gt;   c_stg_in_progress                CONSTANT VARCHAR2 (1)  := &apos;I&apos;;&lt;br/&gt;   c_stg_error                      CONSTANT VARCHAR2 (1)  := &apos;E&apos;;&lt;br/&gt;   c_rt_batchsize                   CONSTANT PLS_INTEGER   := 100;&lt;br/&gt;   c_null_date                      CONSTANT DATE&lt;br/&gt;                                          := TO_DATE (&apos;00010101&apos;, &apos;YYYYMMDD&apos;);&lt;br/&gt;   c_equipment_active               CONSTANT VARCHAR2 (1)  := &apos;H&apos;;&lt;br/&gt;   c_prcssed_rec_text               CONSTANT VARCHAR2 (30)&lt;br/&gt;                                                 := &apos;PROCESSED RECORD COUNT &apos;;&lt;br/&gt;   c_error_rec_text                 CONSTANT VARCHAR2 (30)&lt;br/&gt;                                                     := &apos;ERROR RECORD COUNT &apos;;&lt;br/&gt;   c_proc_start_text                CONSTANT VARCHAR2 (30) := &apos;STARTING&apos;;&lt;br/&gt;   c_proc_end_text                  CONSTANT VARCHAR2 (30) := &apos;END&apos;;&lt;br/&gt;   c_not_found_text                 CONSTANT VARCHAR2 (30) := &apos;NOT FOUND&apos;;&lt;br/&gt;   c_dst_inst_dtl_bucket            CONSTANT VARCHAR2 (30)&lt;br/&gt;                                                        := &apos;DST Insert count&apos;;&lt;br/&gt;   c_dst_updt_dtl_bucket            CONSTANT VARCHAR2 (30)&lt;br/&gt;                                                        := &apos;DST Update count&apos;;&lt;br/&gt;   c_dst_delt_dtl_bucket            CONSTANT VARCHAR2 (30)&lt;br/&gt;                                                        := &apos;DST Delete count&apos;;&lt;br/&gt;   c_dst_exptn_dtl_bucket           CONSTANT VARCHAR2 (30)&lt;br/&gt;                                                     := &apos;DST Exception count&apos;;&lt;br/&gt;   c_dummy_order_no                 CONSTANT VARCHAR2 (16)&lt;br/&gt;                                                        := &apos;0000000000000000&apos;;&lt;br/&gt;   l_final_slot                     CONSTANT NUMBER (2)    := 17;&lt;br/&gt;   c_recon_run_mode                 CONSTANT VARCHAR2 (10) := &apos;AUDIT&apos;;&lt;br/&gt;   c_recon_insert_perform           CONSTANT VARCHAR2 (10) := &apos;INSERT&apos;;&lt;br/&gt;   c_recon_update_perform           CONSTANT VARCHAR2 (10) := &apos;UPDATE&apos;;&lt;br/&gt;   --c_country_code                   CONSTANT VARCHAR2 (3)  := &apos;1&apos;;&lt;br/&gt;   c_country_code_usa               CONSTANT VARCHAR2 (3)  := &apos;USA&apos;;&lt;br/&gt;   c_ts_format                      CONSTANT VARCHAR2 (21)&lt;br/&gt;                                                   := &apos;YYYY.MM.DD.HH24.MI.SS&apos;;&lt;br/&gt;   c_recon_null_number              CONSTANT NUMBER (7)    := -9999999;&lt;br/&gt;   c_recon_null_string              CONSTANT VARCHAR2 (30)&lt;br/&gt;                                                   := &apos;`!@_RECON_NULL_STRING&apos;;&lt;br/&gt;   c_recon_null_date                CONSTANT DATE&lt;br/&gt;                                          := TO_DATE (&apos;00110101&apos;, &apos;YYYYMMDD&apos;);&lt;br/&gt;   --c_recon_null_dttm    CONSTANT TIMESTAMP := TO_TIMESTAMP (&apos;00110101&apos;, &apos;YYYYMMDD&apos;);&lt;br/&gt;   c_recon_null_dttm                CONSTANT TIMESTAMP&lt;br/&gt;               := TO_TIMESTAMP (&apos;0001/01/01 12:00:00&apos;, &apos;YYYY/MM/DD HH:MI:SS&apos;);&lt;br/&gt;   c_uim_audit_user                 CONSTANT VARCHAR2 (4)  := &apos;TUIM&apos;;&lt;br/&gt;   c_request_type_cd_wrkord         CONSTANT VARCHAR2 (10) := &apos;WRKORD&apos;;&lt;br/&gt;   c_request_type_cd_prdord         CONSTANT VARCHAR2 (10) := &apos;PRDORD&apos;;&lt;br/&gt;   c_request_type_cd_splreq         CONSTANT VARCHAR2 (10) := &apos;SPLREQ&apos;;&lt;br/&gt;   c_request_type_cd_rsnord         CONSTANT VARCHAR2 (10) := &apos;RESORD&apos;;&lt;br/&gt;   c_request_type_cd_srvord         CONSTANT VARCHAR2 (10) := &apos;SRVORD&apos;;&lt;br/&gt;   c_bus_interact_type_cd_req       CONSTANT VARCHAR2 (10) := &apos;REQ&apos;;&lt;br/&gt;   c_bus_interact_type_cd_tkt       CONSTANT VARCHAR2 (10) := &apos;TKT&apos;;&lt;br/&gt;   c_relation_request_cd_tktwo      CONSTANT VARCHAR2 (10) := &apos;TKTWO&apos;;&lt;br/&gt;   c_bus_interact_type_cd_resp      CONSTANT VARCHAR2 (10) := &apos;RESP&apos;;&lt;br/&gt;   c_bus_interact_type_cd_notiftn   CONSTANT VARCHAR2 (10) := &apos;NOTIFTN&apos;;&lt;br/&gt;   c_recon_mode_dly                 CONSTANT VARCHAR2 (3)  := &apos;DLY&apos;;&lt;br/&gt;   c_recon_mode_ond                 CONSTANT VARCHAR2 (3)  := &apos;OND&apos;;&lt;br/&gt;   c_party_account_role_cd_resp     CONSTANT VARCHAR2 (4)  := &apos;RESP&apos;;&lt;br/&gt;&lt;br/&gt;   FUNCTION stopnow (p_process_name_i IN t_process_config.process_name%TYPE)&lt;br/&gt;      RETURN BOOLEAN;&lt;br/&gt;&lt;br/&gt;   FUNCTION cnvrt_eqmt_addr (i_eqmt_addr IN VARCHAR2)&lt;br/&gt;      RETURN VARCHAR2;&lt;br/&gt;END pkg_utility;</source>
<body class="oracle.dbtools.crest.model.design.storage.oracle.PackageBodyOracle" name="PKG_UTILITY" id="0882086E-ADEB-F1F6-2E58-C7E955B4E8C6">
<sourceConnName>SOLO_Prod</sourceConnName>
<sourceObjSchema>CHTR</sourceObjSchema>
<sourceObjName>PKG_UTILITY</sourceObjName>
<createdBy>jandrews1</createdBy>
<createdTime>2015-08-11 13:17:27 UTC</createdTime>
<ownerDesignName>SOLO_RE</ownerDesignName>
<owner>5AF9E3FC-7A76-C437-3E83-BF29D7EA2FC7</owner>
<source>CREATE OR REPLACE PACKAGE BODY      CHTR.PKG_UTILITY&lt;br/&gt;IS&lt;br/&gt;   /****************************************************************************************************************&lt;br/&gt;   ||  Program Name    : pkg_utility&lt;br/&gt;   ||  Created By      : Knoll&lt;br/&gt;   ||  Created Date    : 23-AUG-2014&lt;br/&gt;   ||  Subject Area    : General&lt;br/&gt;   ||  Description     : The package pkg_utility is for SOLO utility procedures and functions&lt;br/&gt;   ||                    that will be used by other packages.&lt;br/&gt;   ||  Change log:&lt;br/&gt;   ||&lt;br/&gt;   ||    Changed By      Changed On      Change Description&lt;br/&gt;   ||  -------------------------------------------------------------------------------------------------------------&lt;br/&gt;   ||     Knoll          23-AUG-2014     Initial development&lt;br/&gt;   ||     Cognizant      10-Nov-2014     Standardization Changes&lt;br/&gt;   ||     knoll          02-Feb-2015     Add mac address conversion function, cnvrt_eqmt_addr&lt;br/&gt;   ||                                    Function was copied from old EDW function and changed for our needs;&lt;br/&gt;   ||                                    NOTE: it only deals with 3 different types of CSG formats currently.&lt;br/&gt;   ******************************************************************************************************************/&lt;br/&gt;FUNCTION stopnow(&lt;br/&gt;      p_process_name_i IN t_process_config.process_name%type)&lt;br/&gt;   RETURN BOOLEAN&lt;br/&gt;IS&lt;br/&gt;   /****************************************************************************************************************&lt;br/&gt;   ||  SubProgram Name    : Procedure stopnow&lt;br/&gt;   ||  Estimated Run Time :&lt;br/&gt;   ||  Description        : Checks the process_log to see if the process_name_i should&lt;br/&gt;   ||                       stop processing as soon as possible&lt;br/&gt;   ******************************************************************************************************************/&lt;br/&gt;   l_run_lvl t_process_config.run_lvl%type;&lt;br/&gt;BEGIN&lt;br/&gt;   SELECT&lt;br/&gt;      c.run_lvl&lt;br/&gt;   INTO&lt;br/&gt;      l_run_lvl&lt;br/&gt;   FROM&lt;br/&gt;      t_process_config c&lt;br/&gt;   WHERE&lt;br/&gt;      c.process_name = p_process_name_i;&lt;br/&gt;   RETURN (l_run_lvl=0);&lt;br/&gt;EXCEPTION&lt;br/&gt;WHEN OTHERS THEN&lt;br/&gt;   RETURN FALSE;&lt;br/&gt;END STOPNOW;&lt;br/&gt;&lt;br/&gt;FUNCTION cnvrt_eqmt_addr(&lt;br/&gt;      i_eqmt_addr IN VARCHAR2)&lt;br/&gt;   RETURN VARCHAR2&lt;br/&gt;IS&lt;br/&gt;   /****************************************************************************************************************&lt;br/&gt;   ||  SubProgram Name    : Procedure cnvrt_eqmt_addr&lt;br/&gt;   ||  Estimated Run Time :&lt;br/&gt;   ||  Description        : Convert Solo mac addresses to standard hex format.&lt;br/&gt;   ||                       Note: Solo mac addresses from CSG/Vantage have already had colons removed,&lt;br/&gt;   ||                       been trimmed etc.  Mac addresses from other source data may require changes!!!&lt;br/&gt;   ******************************************************************************************************************/&lt;br/&gt;   l_eqmt_addr VARCHAR2 (20) := NULL;&lt;br/&gt;   l_format_code CHAR (1) := NULL;&lt;br/&gt;   l_length NUMBER := 0;&lt;br/&gt;BEGIN&lt;br/&gt;   l_eqmt_addr := i_eqmt_addr;&lt;br/&gt;   l_length := LENGTH (l_eqmt_addr);&lt;br/&gt;&lt;br/&gt;   -- Length 12, nothing to do&lt;br/&gt;   IF l_length = 12 THEN&lt;br/&gt;      NULL;&lt;br/&gt;&lt;br/&gt;   -- Length 9&lt;br/&gt;   ELSIF l_length = 9 THEN&lt;br/&gt;      l_eqmt_addr := TRIM (TO_CHAR (TO_NUMBER (l_eqmt_addr), &apos;XXXXXXXXXXXX&apos;)); -- Convert to Hex&lt;br/&gt;      l_eqmt_addr := LPAD (l_eqmt_addr, 12, &apos;0&apos;); -- Pad with Zeros to Length of 12&lt;br/&gt;&lt;br/&gt;   -- Length 16 or greater&lt;br/&gt;   ELSIF l_length &gt;= 16 THEN&lt;br/&gt;      l_eqmt_addr := SUBSTR (l_eqmt_addr, 1, l_length - 3); -- Remove Last 3 Digits&lt;br/&gt;      l_eqmt_addr := LTRIM (l_eqmt_addr, &apos;0&apos;); -- Remove Leading Zeros&lt;br/&gt;      l_eqmt_addr := TRIM (TO_CHAR (TO_NUMBER (l_eqmt_addr), &apos;XXXXXXXXXXXX&apos;)); -- Convert to Hex&lt;br/&gt;      l_eqmt_addr := LPAD (l_eqmt_addr, 12, &apos;0&apos;); -- Pad with Zeros to Length of 12&lt;br/&gt;&lt;br/&gt;   -- Unknown format&lt;br/&gt;   ELSE&lt;br/&gt;      l_eqmt_addr := NULL;&lt;br/&gt;   END IF;&lt;br/&gt;&lt;br/&gt;   RETURN l_eqmt_addr;&lt;br/&gt;EXCEPTION&lt;br/&gt;WHEN OTHERS THEN&lt;br/&gt;   RETURN NULL;&lt;br/&gt;END;&lt;br/&gt;&lt;br/&gt;END PKG_UTILITY;</source>
</body>
</PackageOracle>